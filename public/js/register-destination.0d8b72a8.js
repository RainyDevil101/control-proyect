"use strict";(self["webpackChunkbackend"]=self["webpackChunkbackend"]||[]).push([[73],{2820:function(e,t,n){var a=n(4870),s=n(3396),i=n(7139);const o=e=>{const t=(0,i.oR)(),n=(0,a.iH)(""),o=(0,a.iH)(!1),r=(e="")=>{const a=(0,s.Fl)((()=>t.getters["destinations/getDestinationsByTerm"](e)));n.value=a.value,n.value.length>0&&(o.value=!0)};r(e);const d=(0,a.iH)(""),l=(0,a.iH)(!1),u=(e="")=>{const n=(0,s.Fl)((()=>t.getters["locations/getLocationsByTerm"](e)));d.value=n.value,d.value.length>0&&(l.value=!0)};u(e);const c=(0,a.iH)(""),p=(0,a.iH)(!1),v=(e="")=>{const n=(0,s.Fl)((()=>t.getters["users/getUserByTerm"](e)));c.value=n.value,c.value.length>0&&(p.value=!0)};v(e);const g=(0,a.iH)(""),m=(0,a.iH)(!1),D=(e="")=>{const n=(0,s.Fl)((()=>t.getters["divisions/getDivisionsByTerm"](e)));g.value=n.value,g.value.length>0&&(m.value=!0)};return D(e),{destinations:n,showDestinations:o,destinationTerm:r,getStatusDestination:(0,s.Fl)((()=>t.getters["destinations/getStatus"])),destinationUpdate:(0,s.Fl)((()=>t.getters["destinations/getUpdateDestination"])),destinationById:(0,s.Fl)((()=>t.getters["destinations/changeDestinationId"])),destinationIdStatus:(0,s.Fl)((()=>t.getters["destinations/getDestinationIdStatus"])),locations:d,showLocations:l,locationTerm:u,getStatusLocation:(0,s.Fl)((()=>t.getters["locations/getStatus"])),locationUpdate:(0,s.Fl)((()=>t.getters["locations/getUpdateLocation"])),locationById:(0,s.Fl)((()=>t.getters["locations/changeLocationId"])),locationIdStatus:(0,s.Fl)((()=>t.getters["locations/getLocationIdStatus"])),users:c,showUsers:p,userTerm:v,getStatusLocation:(0,s.Fl)((()=>t.getters["users/getStatus"])),userUpdate:(0,s.Fl)((()=>t.getters["users/getUpdateUser"])),userById:(0,s.Fl)((()=>t.getters["users/changeUserId"])),userIdStatus:(0,s.Fl)((()=>t.getters["users/getUserIdStatus"])),divisions:g,showDivisions:m,divisionTerm:D,getStatusDivision:(0,s.Fl)((()=>t.getters["divisions/getStatus"])),divisionUpdate:(0,s.Fl)((()=>t.getters["divisions/getUpdateDivision"])),divisionById:(0,s.Fl)((()=>t.getters["divisions/changeDivisionId"])),divisionIdStatus:(0,s.Fl)((()=>t.getters["divisions/getDivisionIdStatus"]))}};t["Z"]=o},6267:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(3396);const s=e=>((0,a.dD)("data-v-3b6b4a29"),e=e(),(0,a.Cn)(),e),i={class:"loader-rev"},o=s((()=>(0,a._)("div",null,null,-1))),r=[o];function d(e,t,n,s,o,d){return(0,a.wg)(),(0,a.iD)("div",i,r)}var l={},u=n(89);const c=(0,u.Z)(l,[["render",d],["__scopeId","data-v-3b6b4a29"]]);var p=c},3620:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var a=n(3396),s=n(9242);const i=e=>((0,a.dD)("data-v-4e8367a0"),e=e(),(0,a.Cn)(),e),o={key:0,class:"update-destination"},r={key:2,class:"wrapper"},d={class:"destinations"},l=i((()=>(0,a._)("div",{class:"header"},[(0,a._)("h1",null,"Destinos")],-1))),u={class:"create"},c={class:"form"},p=i((()=>(0,a._)("button",{type:"submit",class:"button-forum"},"CREAR",-1))),v={class:"search"},g={key:0,class:"body"},m={key:1,class:"not-register"},D=i((()=>(0,a._)("h1",null,"NO HAY REGISTROS",-1))),h=[D],b={class:"button-wrapper"};function w(e,t,n,i,D,w){const f=(0,a.up)("update-destination"),U=(0,a.up)("loader"),_=(0,a.up)("destinations");return(0,a.wg)(),(0,a.iD)(a.HY,null,[!0===i.destinationUpdate?((0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(f,{"onOn:close":i.onShowUpdateDestination},null,8,["onOn:close"])])):(0,a.kq)("",!0),"CARGANDO"===i.getStatusDestination?((0,a.wg)(),(0,a.j4)(U,{key:1,class:"loader-wrapper"})):((0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",d,[l,(0,a._)("div",u,[(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>i.onSubmit&&i.onSubmit(...e)),["prevent"]))},[(0,a._)("div",c,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Nombre","onUpdate:modelValue":t[0]||(t[0]=e=>i.destinationForm.name=e),maxlength:"25"},null,512),[[s.nr,i.destinationForm.name]]),p])],32)]),(0,a._)("div",v,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Buscar destino","onUpdate:modelValue":t[2]||(t[2]=e=>i.term=e)},null,512),[[s.nr,i.term]])]),!0===i.showDestinations?((0,a.wg)(),(0,a.iD)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.destinations,(e=>((0,a.wg)(),(0,a.j4)(_,{key:e.id,destination:e,"onOn:open":i.onShowUpdateDestination},null,8,["destination","onOn:open"])))),128))])):((0,a.wg)(),(0,a.iD)("div",m,h)),(0,a._)("div",b,[(0,a._)("button",{type:"button",onClick:t[3]||(t[3]=t=>e.$router.push({name:"select-register"})),class:"btn btn-warning back"}," Volver ")])])]))],64)}var f=n(7139),U=n(4870),_=n(2492),y=n.n(_),S=n(6267),I=n(2268);const k={class:"destination"},H={class:"destination"};function F(e,t,n,s,i,o){return(0,a.wg)(),(0,a.iD)("div",{onClick:t[0]||(t[0]=t=>e.$emit("on:open",{id:s.id})),class:"destination-container"},[(0,a._)("span",k,(0,I.zw)(s.destination.id),1),(0,a._)("span",H,(0,I.zw)(s.destination.nombre),1)])}var C={emits:["on:open"],props:{destination:{type:Object,required:!0}},setup(e){const t=(0,U.iH)(e.destination),n=e.destination.id;return{destination:t,id:n}}},P=n(89);const T=(0,P.Z)(C,[["render",F],["__scopeId","data-v-0fcab269"]]);var B=T,Z=n(6322);const x=()=>{const e=(0,U.iH)(!0),t=(0,U.iH)(),n=(0,U.iH)(!1),a=(0,U.iH)(!0),s=(0,U.iH)(!1),i=(0,U.iH)(),o=(0,U.iH)(!0),r=(0,U.iH)(!1),d=async a=>{if(""===a.name||!a.name)return e.value="Debe llenar los campos",t.value="",{errorsPost:e,location:location,nicePost:n};{const{name:i}=a,o=i;try{const a=await Z.Z.post("/api/destination",{nombre:o},{headers:{"x-token":localStorage.getItem("token")}});return t.value=a.data.destination,n.value=!0,e.value=!1,{errorsPost:e,nicePost:n,destination:t}}catch(s){if(s.response.data.msg)return e.value=s.response.data.msg,t.value=null,n.value=!1,{errorsPost:e,nicePost:n,destination:t};if(s.response.data.errors){const a=[],i=s.response.data.errors;for(const e of i)a.push(" "+e.msg);return e.value=a,t.value=null,n.value=!1,{errorsPost:e,nicePost:n,destination:t}}return t.value=resp.data.code,e.value=!1,n.value=!0,{errorsPost:e,nicePost:n,destination:t}}}},l=async(e,t)=>{if(!e||""===e.nombre)return s.value=!1,a.value="No se pudo actualizar",{niceUpdate:s,errorsUpdate:a};try{await Z.Z.put(`/api/destination/${t}`,{updateForum:e},{headers:{"x-token":localStorage.getItem("token")}});return s.value=!0,a.value=!1,{niceUpdate:s,errorsUpdate:a}}catch(n){if(n.response.data.msg)return a.value=n.response.data.msg,{niceUpdate:s,errorsUpdate:a};if(n.response.data.errors){const e=[],t=n.response.data.errors;for(const n of t)e.push(" "+n.msg);return a.value=e,{niceUpdate:s,errorsUpdate:a}}return{niceUpdate:s,errorsUpdate:a}}},u=async(e="")=>{if(""===e||!e)return o.value="No existe",{errorsDelete:o,niceDelete:r};try{const t=await Z.Z["delete"](`/api/destination/${e}`,{headers:{"x-token":localStorage.getItem("token")}});return i.value=t.data,r.value=!0,o.value=!1,{errorsDelete:o,niceDelete:r,idDelete:i}}catch(t){if(t.response.data.msg)return o.value=t.response.data.msg,{niceDelete:r,errorsDelete:o};if(t.response.data.errors){const e=[],n=t.response.data.errors;for(const t of n)e.push(" "+t.msg);return o.value=e,{niceDelete:r,errorsDelete:o}}return{niceDelete:r,errorsDelete:o}}};return{postDestination:d,errorsPost:e,destination:t,nicePost:n,updateDestination:l,errorsUpdate:a,niceUpdate:s,deleteDestination:u,errorsDelete:o,idDelete:i,niceDelete:r}};var L=x,E=n(2820);const N=e=>((0,a.dD)("data-v-ba0ff8ba"),e=e(),(0,a.Cn)(),e),O={class:"modal-container"},R={class:"update-wrapper"},z={class:"name margin-item"},$=N((()=>(0,a._)("span",null,"Nombre:",-1))),A={class:"name margin-item"},G=N((()=>(0,a._)("span",null,"id:",-1))),V={class:"input-change-name margin-item"},Y={class:"update-button"},j=N((()=>(0,a._)("button",{class:"btn btn-warning",type:"submit"}," Cambiar Nombre ",-1)));function M(e,t,n,i,o,r){return(0,a.wg)(),(0,a.iD)("div",{class:"modal-background fade-in",onClick:t[3]||(t[3]=(0,s.iM)((t=>e.$emit("on:close")),["self"]))},[(0,a._)("div",O,[(0,a._)("div",R,[(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>i.onSubmit&&i.onSubmit(...e)),["prevent"]))},[(0,a._)("div",z,[$,(0,a._)("p",null,[(0,a._)("b",null,(0,I.zw)(i.destination.nombre),1)])]),(0,a._)("div",A,[G,(0,a._)("p",null,[(0,a._)("b",null,(0,I.zw)(i.destinationId),1)])]),(0,a._)("div",V,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"","onUpdate:modelValue":t[0]||(t[0]=e=>i.destinationName=e)},null,512),[[s.nr,i.destinationName]])]),(0,a._)("div",Y,[j,(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>i.onDelete&&i.onDelete(...e))},"Eliminar")])],32)])])])}var q={components:{Loader:S.Z},emits:["on:close"],setup(){const e=(0,f.oR)(),{destinationById:t}=(0,E.Z)(),n=(0,U.iH)(""),a=(0,U.iH)(""),s=(0,U.iH)(""),{deleteDestination:i,updateDestination:o}=L(),r=(0,U.iH)({nombre:""});return n.value=t.value.destinationToChange,a.value=t.value.destinationIdToChange,s.value=t.value.destinationToChange.nombre,{destinationById:t,destinationUpdate:r,destinationId:a,destination:n,destinationName:s,onSubmit:async()=>{new(y())({title:"Espere por favor",allowOutsideClick:!1}),y().showLoading();const{errorsUpdate:t,niceUpdate:n}=await o(s.value,a.value);!1!==n.value?(await e.dispatch("destinations/loadDestinations"),y().fire("Guardado","Destino actualizado con éxito","success").then((function(e){location.reload()}))):y().fire("Error",`${t.value}.`,"error")},onDelete:async()=>{const{isConfirmed:t}=await y().fire({title:"¿Estás seguro?",text:"No se podrá recuperar una vez borrado",showDenyButton:!0,confirmButtonText:"Estoy seguro"});if(t){new(y())({title:"Espere por favor",allowOutsideClick:!1}),y().showLoading();const{idDelete:t,errorsDelete:n,niceDelete:s}=await i(a.value);!0===s.value&&(await e.dispatch("destinations/loadDestinations"),y().fire("Eliminado","","success").then((function(e){location.reload()})))}}}}};const K=(0,P.Z)(q,[["render",M],["__scopeId","data-v-ba0ff8ba"]]);var W=K,J={components:{destinations:B,Loader:S.Z,UpdateDestination:W},setup(){const e=(0,f.oR)(),t=(0,U.iH)(""),{destinationTerm:n,getStatusDestination:s,destinations:i,destinationUpdate:o,destinationIdStatus:r,showDestinations:d}=(0,E.Z)(t.value),l=(0,U.iH)({name:""});(0,a.YP)((()=>t.value),(()=>n(t.value)));const{postDestination:u}=L();return{destinationForm:l,postDestination:u,term:t,destinationTerm:n,getStatusDestination:s,destinations:i,destinationUpdate:o,destinationIdStatus:r,showDestinations:d,onSubmit:async()=>{new(y())({title:"Espere por favor",allowOutsideClick:!1}),y().showLoading();const{errorsPost:t,destination:n,nicePost:a}=await u(l.value);!1!==a.value?(await e.dispatch("destinations/loadDestinations"),y().fire("Guardado","Destino registrada con éxito","success").then((function(e){location.reload()}))):y().fire("Error",`${t.value}.`,"error")},onShowUpdateDestination:t=>!1===o.value?(e.dispatch("destinations/changeDestinationId",t),void e.dispatch("destinations/changeDestinationUpdate",!0)):void e.dispatch("destinations/changeDestinationUpdate",!1)}}};const Q=(0,P.Z)(J,[["render",w],["__scopeId","data-v-4e8367a0"]]);var X=Q}}]);
//# sourceMappingURL=register-destination.0d8b72a8.js.map