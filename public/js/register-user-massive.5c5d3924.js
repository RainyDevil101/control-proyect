"use strict";(self["webpackChunkbackend"]=self["webpackChunkbackend"]||[]).push([[554],{1298:function(e,a,l){l.r(a),l.d(a,{default:function(){return T}});var t=l(3396),s=l(9242);const n=e=>((0,t.dD)("data-v-4406d5e0"),e=e(),(0,t.Cn)(),e),o={class:"wrapper"},i={class:"container-massive"},r=(0,t.uE)('<div class="massive-header" data-v-4406d5e0><h1 data-v-4406d5e0>Carga de usuarios</h1></div><div class="instructions" data-v-4406d5e0><p data-v-4406d5e0> Descargue la plantilla Excel que encontrará abajo e ingrese los datos en el formato que aparece ahí, para que los datos sean cargados correctamente tenga en cuenta lo siguiente: </p><hr data-v-4406d5e0><ul data-v-4406d5e0><li data-v-4406d5e0>Los nombres y apellidos deben ir en sus respectivas celdas.</li><li data-v-4406d5e0>Los usuarios deben tener un email válido.</li><li data-v-4406d5e0> Debe ingresar el rut con alguno de los siguientes formatos: <ul data-v-4406d5e0><li data-v-4406d5e0>12.345.678-9</li><li data-v-4406d5e0>123456789</li><li data-v-4406d5e0>12*345*678*9</li><li data-v-4406d5e0>12345678-9</li></ul></li><li data-v-4406d5e0><p data-v-4406d5e0>Las divisiones deben escribirse de la siguiente manera:</p><ul data-v-4406d5e0><li data-v-4406d5e0>TENIENTE</li><li data-v-4406d5e0>ANDINA</li><li data-v-4406d5e0>VENTANAS</li><li data-v-4406d5e0>SALVADOR</li><li data-v-4406d5e0>CHUQUICAMATA</li><li data-v-4406d5e0>ESPORADICOS ANDINA</li><li data-v-4406d5e0>ESPORADICOS TENIENTE</li><li data-v-4406d5e0>CASA MATRIZ</li></ul></li><li data-v-4406d5e0><p data-v-4406d5e0>El cargo debe ser uno de los siguientes:</p><ul data-v-4406d5e0><li data-v-4406d5e0>PLANIFICADOR</li><li data-v-4406d5e0>OPERADOR LOGISTICO</li></ul></li></ul></div>',2),d={class:"form-massive"},u={class:"input-button"},c={class:"button-align download-plantilla"},v=n((()=>(0,t._)("div",{class:"button-align select-file"},[(0,t._)("label",{class:"buttons-styles",for:"excel-file"},"Seleccionar archivo")],-1))),p=n((()=>(0,t._)("div",{class:"button-align load-file-button"},[(0,t._)("button",{type:"submit",class:"buttons-styles",value:"Store File"}," Cargar ")],-1))),A={class:"button-align back-button"};function I(e,a,l,n,I,O){return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",i,[r,(0,t._)("div",d,[(0,t._)("form",{onSubmit:a[3]||(a[3]=(0,s.iM)(((...e)=>n.onSubmit&&n.onSubmit(...e)),["prevent"]))},[(0,t._)("div",u,[(0,t._)("input",{type:"file",onChange:a[0]||(a[0]=(...e)=>n.onFile&&n.onFile(...e)),id:"excel-file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,32),(0,t._)("div",c,[(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>n.onDownload&&n.onDownload(...e)),type:"button",class:"buttons-styles"}," Descargar plantilla ")]),v,p,(0,t._)("div",A,[(0,t._)("button",{type:"button",onClick:a[2]||(a[2]=a=>e.$router.push({name:"select-register"})),class:"buttons-styles"}," Volver ")])])],32)])])])}var O=l(4870),E=l(7139),g=l(6322);const b=()=>{const e=(0,O.iH)(!0),a=(0,O.iH)(null),l=(0,O.iH)(null),t=async t=>{if(!t)return e.value="Debe seleccionar un archivo",a.value=!1,{errors:e,nice:a};try{const s=new FormData;s.append("file",t);const{data:n}=await g.Z.post("/api/userExcel/uploadFile",s,{headers:{"x-token":localStorage.getItem("token")}});return console.log(n),a.value=!0,e.value=!1,l.value=n.msg,{errors:e,nice:a,message:l}}catch(s){if(s.response.data.msg)return e.value=s.response.data.msg,a.value=!1,console.log(e.value),{errors:e,nice:a,message:l};if(s.response.data.errors){const t=[],n=s.response.data.errors;for(const e of n)t.push(" "+e.msg);return e.value=t,a.value=!1,{errors:e,nice:a,message:l}}return e.value=!0,a.value=!1,{errors:e,nice:a,message:l}}};return{errors:e,sendData:t,nice:a,message:l}};var m=b,D=l(7092);const f=()=>{const e=(0,O.iH)(!1),a=()=>{let a=D.P6.book_new(),l="USUARIOS",t=[{NOMBRES:"OSCAR ROLANDO",APELLIDOS:"PALACIOS SERRAT",EMAIL:"PENDIENTE",RUT:"13674111-k",DIVISION:"ANDINA",CARGO:"OPERADOR LOGISTICO"},{NOMBRES:"PABLO EMILIO",APELLIDOS:"YAEGER LATORRE",EMAIL:"PENDIENTE",RUT:"17971650-k",DIVISION:"ANDINA",CARGO:"OPERADOR LOGISTICO"},{NOMBRES:"JUAN MANUEL",APELLIDOS:"AGUILERA PORRAS",EMAIL:"PENDIENTE",RUT:"11517358-8",DIVISION:"ANDINA",CARGO:"OPERADOR LOGISTICO"}],s=[];for(let e=0;e<t.length;e++){let a=Object.values(t[e]);for(let e=0;e<a.length;e++)"number"==typeof a[e]?s[e]=10:s[e]=s[e]>=a[e].length?s[e]:a[e].length}const n=s.map((e=>({width:e})));let o=D.P6.json_to_sheet(t);o["!cols"]=n,D.P6.book_append_sheet(a,o,l);let i="plantilla_carga_usuarios.xlsx";return(0,D.NC)(a,i),e.value=!0,{ok:e}};return{excelTemplateUsers:a,ok:e}};var R=f,N=l(2492),S=l.n(N),h={setup(){const e=(0,E.oR)(),a=(0,O.iH)(null),{sendData:l}=m(),{excelTemplateUsers:t}=R();return{localFile:a,sendData:l,excelTemplateUsers:t,onSubmit:async()=>{new(S())({title:"Espere por favor",allowOutsideClick:!1}),S().showLoading();const{errors:t,nice:s,message:n}=await l(a.value);!1!==s.value?(await e.dispatch("users/loadUsers"),S().fire("Guardado",`${n.value}`,"success").then((function(e){location.reload()}))):S().fire("Error",`${t.value}.`,"error").then((function(e){location.reload()}))},onFile:async e=>{const l=e.target.files[0];a.value=l||null},onDownload:async()=>{const{ok:e}=t();console.log(e)}}}},L=l(89);const C=(0,L.Z)(h,[["render",I],["__scopeId","data-v-4406d5e0"]]);var T=C}}]);
//# sourceMappingURL=register-user-massive.5c5d3924.js.map