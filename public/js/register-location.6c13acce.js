"use strict";(self["webpackChunkbackend"]=self["webpackChunkbackend"]||[]).push([[843],{2820:function(e,t,o){var a=o(4870),n=o(3396),i=o(7139);const s=e=>{const t=(0,i.oR)(),o=(0,a.iH)(""),s=(0,a.iH)(!1),r=(e="")=>{const a=(0,n.Fl)((()=>t.getters["destinations/getDestinationsByTerm"](e)));o.value=a.value,o.value.length>0&&(s.value=!0)};r(e);const l=(0,a.iH)(""),c=(0,a.iH)(!1),d=(e="")=>{const o=(0,n.Fl)((()=>t.getters["locations/getLocationsByTerm"](e)));l.value=o.value,l.value.length>0&&(c.value=!0)};d(e);const u=(0,a.iH)(""),p=(0,a.iH)(!1),v=(e="")=>{const o=(0,n.Fl)((()=>t.getters["users/getUserByTerm"](e)));u.value=o.value,u.value.length>0&&(p.value=!0)};v(e);const g=(0,a.iH)(""),m=(0,a.iH)(!1),h=(e="")=>{const o=(0,n.Fl)((()=>t.getters["divisions/getDivisionsByTerm"](e)));g.value=o.value,g.value.length>0&&(m.value=!0)};return h(e),{destinations:o,showDestinations:s,destinationTerm:r,getStatusDestination:(0,n.Fl)((()=>t.getters["destinations/getStatus"])),destinationUpdate:(0,n.Fl)((()=>t.getters["destinations/getUpdateDestination"])),destinationById:(0,n.Fl)((()=>t.getters["destinations/changeDestinationId"])),destinationIdStatus:(0,n.Fl)((()=>t.getters["destinations/getDestinationIdStatus"])),locations:l,showLocations:c,locationTerm:d,getStatusLocation:(0,n.Fl)((()=>t.getters["locations/getStatus"])),locationUpdate:(0,n.Fl)((()=>t.getters["locations/getUpdateLocation"])),locationById:(0,n.Fl)((()=>t.getters["locations/changeLocationId"])),locationIdStatus:(0,n.Fl)((()=>t.getters["locations/getLocationIdStatus"])),users:u,showUsers:p,userTerm:v,getStatusLocation:(0,n.Fl)((()=>t.getters["users/getStatus"])),userUpdate:(0,n.Fl)((()=>t.getters["users/getUpdateUser"])),userById:(0,n.Fl)((()=>t.getters["users/changeUserId"])),userIdStatus:(0,n.Fl)((()=>t.getters["users/getUserIdStatus"])),divisions:g,showDivisions:m,divisionTerm:h,getStatusDivision:(0,n.Fl)((()=>t.getters["divisions/getStatus"])),divisionUpdate:(0,n.Fl)((()=>t.getters["divisions/getUpdateDivision"])),divisionById:(0,n.Fl)((()=>t.getters["divisions/changeDivisionId"])),divisionIdStatus:(0,n.Fl)((()=>t.getters["divisions/getDivisionIdStatus"]))}};t["Z"]=s},6267:function(e,t,o){o.d(t,{Z:function(){return p}});var a=o(3396);const n=e=>((0,a.dD)("data-v-3b6b4a29"),e=e(),(0,a.Cn)(),e),i={class:"loader-rev"},s=n((()=>(0,a._)("div",null,null,-1))),r=[s];function l(e,t,o,n,s,l){return(0,a.wg)(),(0,a.iD)("div",i,r)}var c={},d=o(89);const u=(0,d.Z)(c,[["render",l],["__scopeId","data-v-3b6b4a29"]]);var p=u},1737:function(e,t,o){o.r(t),o.d(t,{default:function(){return le}});var a=o(3396),n=o(9242),i=o(2268);const s=e=>((0,a.dD)("data-v-fbdedc5a"),e=e(),(0,a.Cn)(),e),r={key:0,class:"update-location"},l={key:1,class:"loader-wrapper"},c={key:2,class:"wrapper-locations"},d={class:"locations"},u=s((()=>(0,a._)("div",{class:"header"},[(0,a._)("h1",null,"Ubicaciones")],-1))),p={key:0,class:"body-location"},v={key:1,class:"not-register"},g=s((()=>(0,a._)("h1",null,"NO HAY REGISTROS",-1))),m=[g],h={class:"button-wrapper"},b={class:"create-wrapper"},w={class:"create"},f=s((()=>(0,a._)("div",{class:"header"},[(0,a._)("h1",null,"Registrar ubicación")],-1))),D={class:"form form-name"},_=s((()=>(0,a._)("p",null,"Nombre",-1))),U={class:"form form-name"},y=s((()=>(0,a._)("p",null,"Sector",-1))),S={class:"form form-location-division"},L=s((()=>(0,a._)("p",null,"División",-1))),I=["value"],k=s((()=>(0,a._)("div",{class:"button-wrapper"},[(0,a._)("button",{type:"submit",class:"btn btn-warning back"},"CREAR")],-1)));function F(e,t,o,s,g,F){const H=(0,a.up)("update-location"),T=(0,a.up)("loader"),C=(0,a.up)("locations");return(0,a.wg)(),(0,a.iD)(a.HY,null,[!0===s.locationUpdate?((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(H,{"onOn:close":s.onShowUpdateLocation},null,8,["onOn:close"])])):(0,a.kq)("",!0),"CARGANDO"===s.getStatusLocation?((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(T)])):((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[u,!0===s.showLocations?((0,a.wg)(),(0,a.iD)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.locations,(e=>((0,a.wg)(),(0,a.j4)(C,{key:e,location:e,"onOn:open":s.onShowUpdateLocation},null,8,["location","onOn:open"])))),128))])):((0,a.wg)(),(0,a.iD)("div",v,m)),(0,a._)("div",h,[(0,a._)("button",{type:"button",onClick:t[0]||(t[0]=t=>e.$router.push({name:"select-register"})),class:"btn btn-warning back"}," Volver ")])]),(0,a._)("div",b,[(0,a._)("div",w,[(0,a._)("form",{onSubmit:t[4]||(t[4]=(0,n.iM)(((...e)=>s.onSubmit&&s.onSubmit(...e)),["prevent"]))},[f,(0,a._)("div",D,[_,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Nombre","onUpdate:modelValue":t[1]||(t[1]=e=>s.locationForm.name=e),maxlength:"60"},null,512),[[n.nr,s.locationForm.name]])]),(0,a._)("div",U,[y,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Sector","onUpdate:modelValue":t[2]||(t[2]=e=>s.locationForm.sector=e),maxlength:"60"},null,512),[[n.nr,s.locationForm.sector]])]),(0,a._)("div",S,[L,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.locationForm.location_division=e),"aria-label":"Default select example"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.divisions,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name),9,I)))),128))],512),[[n.bM,s.locationForm.location_division]])]),k],32)])])]))],64)}var H=o(4870),T=o(7139),C=o(2492),x=o.n(C),P=o(6267);const Z={class:"location"},E={class:"location"};function N(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",{onClick:t[0]||(t[0]=t=>e.$emit("on:open",{id:n.id})),class:"location-container"},[(0,a._)("span",Z,(0,i.zw)(n.location.id),1),(0,a._)("span",E,(0,i.zw)(n.location.name),1)])}var B={emits:["on:open"],props:{location:{type:Object,required:!0}},setup(e){const t=(0,H.iH)(e.location),o=e.location.id;return{location:t,id:o}}},O=o(89);const R=(0,O.Z)(B,[["render",N],["__scopeId","data-v-6ede82ff"]]);var z=R,$=o(6322);const G=()=>{const e=(0,H.iH)(!0),t=(0,H.iH)(),o=(0,H.iH)(!1),a=(0,H.iH)(!0),n=(0,H.iH)(!1),i=(0,H.iH)(),s=(0,H.iH)(!0),r=(0,H.iH)(!1),l=async a=>{if(e.value=!0,0===a.name.length||0===a.sector.length||0===a.location_division.length)return e.value="Debe llenar los campos",t.value="",{errorsPost:e,location:t,nicePost:o};try{const n=await $.Z.post("/api/location",{locationForm:a},{headers:{"x-token":localStorage.getItem("token")}});return t.value=n.data.location,o.value=!0,e.value=!1,{errorsPost:e,nicePost:o,location:t}}catch(n){if(n.response.data.msg)return e.value=n.response.data.msg,t.value=null,o.value=!1,{errorsPost:e,nicePost:o,location:t};if(n.response.data.errors){const a=[],i=n.response.data.errors;for(const e of i)a.push(" "+e.msg);return e.value=a,t.value=null,o.value=!1,{errorsPost:e,nicePost:o,location:t}}return t.value=resp.data.code,e.value=!1,o.value=!0,{errorsPost:e,nicePost:o,location:t}}},c=async(e,t)=>{if(a.value=!0,!e||""===e.name)return n.value=!1,a.value="No se pudo actualizar",{niceUpdate:n,errorsUpdate:a};try{await $.Z.put(`/api/location/${t}`,{updateForum:e},{headers:{"x-token":localStorage.getItem("token")}});return n.value=!0,a.value=!1,{niceUpdate:n,errorsUpdate:a}}catch(o){if(o.response.data.msg)return a.value=o.response.data.msg,{niceUpdate:n,errorsUpdate:a};if(o.response.data.errors){const e=[],t=o.response.data.errors;for(const o of t)e.push(" "+o.msg);return a.value=e,{niceUpdate:n,errorsUpdate:a}}return{niceUpdate:n,errorsUpdate:a}}},d=async(e="")=>{if(""===e||!e)return s.value="No existe",{errorsDelete:s,niceDelete:r};try{const t=await $.Z["delete"](`/api/location/${e}`,{headers:{"x-token":localStorage.getItem("token")}});return i.value=t.data,r.value=!0,s.value=!1,{errorsDelete:s,niceDelete:r,idDelete:i}}catch(t){if(t.response.data.msg)return s.value=t.response.data.msg,{niceDelete:r,errorsDelete:s};if(t.response.data.errors){const e=[],o=t.response.data.errors;for(const t of o)e.push(" "+t.msg);return s.value=e,{niceDelete:r,errorsDelete:s}}return{niceDelete:r,errorsDelete:s}}};return{postLocation:l,errorsPost:e,location:t,nicePost:o,updateLocation:c,errorsUpdate:a,niceUpdate:n,deleteLocation:d,errorsDelete:s,idDelete:i,niceDelete:r}};var V=G,A=o(2820);const M=e=>((0,a.dD)("data-v-5e409b03"),e=e(),(0,a.Cn)(),e),Y={class:"modal-container"},j={class:"update-wrapper"},q={class:"name margin-item"},K=M((()=>(0,a._)("span",null,"Nombre:",-1))),W={class:"name margin-item"},J=M((()=>(0,a._)("span",null,"id:",-1))),Q={class:"input-change-name margin-item"},X={class:"update-button"},ee=M((()=>(0,a._)("button",{class:"btn btn-warning",type:"submit"}," Cambiar Nombre ",-1)));function te(e,t,o,s,r,l){return(0,a.wg)(),(0,a.iD)("div",{class:"modal-background fade-in",onClick:t[3]||(t[3]=(0,n.iM)((t=>e.$emit("on:close")),["self"]))},[(0,a._)("div",Y,[(0,a._)("div",j,[(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>s.onSubmit&&s.onSubmit(...e)),["prevent"]))},[(0,a._)("div",q,[K,(0,a._)("p",null,[(0,a._)("b",null,(0,i.zw)(s.ubication.nombre),1)])]),(0,a._)("div",W,[J,(0,a._)("p",null,[(0,a._)("b",null,(0,i.zw)(s.locationId),1)])]),(0,a._)("div",Q,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"","onUpdate:modelValue":t[0]||(t[0]=e=>s.locationName=e)},null,512),[[n.nr,s.locationName]])]),(0,a._)("div",X,[ee,(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>s.onDelete&&s.onDelete(...e))},"Eliminar")])],32)])])])}var oe={components:{Loader:P.Z},emits:["on:close"],setup(){const e=(0,T.oR)(),{locationById:t}=(0,A.Z)(),o=(0,H.iH)(""),a=(0,H.iH)(""),n=(0,H.iH)(""),{deleteLocation:i,updateLocation:s}=V(),r=(0,H.iH)({nombre:""});return o.value=t.value.locationToChange,a.value=t.value.locationIdToChange,n.value=t.value.locationToChange.name,{locationById:t,locationUpdate:r,locationId:a,ubication:o,locationName:n,onSubmit:async()=>{new(x())({title:"Espere por favor",allowOutsideClick:!1}),x().showLoading();const{errorsUpdate:t,niceUpdate:o}=await s(n.value,a.value);!1!==o.value?(await e.dispatch("locations/loadLocations"),x().fire("Guardado","Ubicación actualizado con éxito","success").then((function(e){location.reload()}))):x().fire("Error",`${t.value}.`,"error")},onDelete:async()=>{const{isConfirmed:t}=await x().fire({title:"¿Estás seguro?",text:"No se podrá recuperar una vez borrado",showDenyButton:!0,confirmButtonText:"Estoy seguro"});if(t){new(x())({title:"Espere por favor",allowOutsideClick:!1}),x().showLoading();const{idDelete:t,errorsDelete:o,niceDelete:n}=await i(a.value);!0===n.value&&(await e.dispatch("locations/loadLocations"),x().fire("Eliminado","","success").then((function(e){location.reload()})))}}}}};const ae=(0,O.Z)(oe,[["render",te],["__scopeId","data-v-5e409b03"]]);var ne=ae,ie=o(4207),se={components:{locations:z,Loader:P.Z,updateLocation:ne},setup(){const e=(0,T.oR)(),{getLocations:t}=(0,ie.Z)(),{postLocation:o}=V(),{locationTerm:a,getStatusLocation:n,locations:i,locationUpdate:s,locationIdStatus:r,showLocations:l,divisions:c}=(0,A.Z)(),d=(0,H.iH)({name:"TESTTTT",sector:"TESTING",location_division:""});return{locationForm:d,postLocation:o,locations:i,getStatusLocation:n,locationTerm:a,locationUpdate:s,locationIdStatus:r,showLocations:l,divisions:c,onSubmit:async()=>{new(x())({title:"Espere por favor",allowOutsideClick:!1}),x().showLoading();const{errorsPost:t,nicePost:a}=await o(d.value);!1!==a.value?(await e.dispatch("divisions/loadDivisions"),x().fire("Guardado","Ubicación registrada con éxito","success").then((function(e){location.reload()}))):x().fire("Error",`${t.value}.`,"error")},onShowUpdateLocation:o=>!1===s.value?(e.dispatch("locations/changeLocationId",o),void e.dispatch("locations/changeLocationUpdate",!0)):(t(),void e.dispatch("locations/changeLocationUpdate",!1))}}};const re=(0,O.Z)(se,[["render",F],["__scopeId","data-v-fbdedc5a"]]);var le=re}}]);
//# sourceMappingURL=register-location.6c13acce.js.map